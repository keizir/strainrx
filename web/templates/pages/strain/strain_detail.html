{% extends "base.html" %}

{% load staticfiles i18n %}
{% load search_template_tags %}

{% block title %}Strain Detail{% endblock %}

{% block css %}
    {{ block.super }}
    <link href="{% static 'css/pages/strain/strain_detail.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}
    <div class="container">
        <div class="strain-detail-wrapper">
            <input type="hidden" class="strain-id" value="{{ strain_id }}"/>
        </div>

        {% include 'pages/strain/strain_detail_sections_template.html' %}
        {% include 'pages/strain/strain_effects_template.html' %}
        {% include 'pages/strain/strain_side_effects_template.html' %}
        {% include 'pages/strain/strain_flavors_template.html' %}
        {% include 'pages/strain/strain_review_template.html' %}
        {% include 'pages/strain/strain_review_dialog_template.html' %}
        {% include 'pages/strain/strain_review_dialog_effect_slider_template.html' %}
        {% include 'pages/strain/strain_review_dialog_review_effect_template.html' %}
        {% include 'pages/strain/strain_review_dialog_effects_payload_template.html' %}

    </div>
{% endblock %}

{% block javascript %}
    {{ block.super }}
    <script src="{% static 'js/common/model.js' %}"></script>
    <script src="{% static 'js/pages/strain/strain_detail.js' %}"></script>
    <script src="{% static 'js/pages/strain/strain_detail_review_dialog.js' %}"></script>
    <script src="{% static 'js/pages/strain/strain_detail_view.js' %}"></script>
    <script type="text/javascript">
        W.pages.strain.StrainDetailView.init();
    </script>
{% endblock %}

{% block modal %}
    <div class="strain-review-dialog-wrapper hidden"></div>

    <div class="dialog undo-strain-review-dialog hidden" title="Undo Your Changes">
        <div class="dialog-text">
            <span>Are you sure you want to undo your changes?</span>
        </div>
        <div class="dialog-actions">
            <div class="buttons-section">
                <button type="button" class="btn-primary btn-yes">Yes</button>
                <button type="button" class="btn-secondary btn-cancel">Cancel</button>
            </div>
        </div>
    </div>
    <div class="dialog form-dialog upload-image-dialog hidden" title="Upload Photo">
        <form class="image-upload-form">
            {% csrf_token %}
            <span class="photo-camera-wrapper">
                <i class="fa fa-camera fa-5x" aria-hidden="true"></i>
            </span>
            <div class="form-group">
                <div class="form-field">
                    <input type="file" class="upload-image" value="Choose File"/>
                </div>
            </div>
            <div class="form-actions">
                <button class="btn-primary btn-upload-image-submit" type="submit">Upload</button>
                <div class="loader hidden">
                    <i class="fa fa-refresh fa-3x rotating" aria-hidden="true"></i>
                </div>
            </div>
        </form>
    </div>
    <div class="dialog form-dialog rate-dialog rate-strain-dialog hidden" title="Rate this strain">
        <form class="rate-strain-form">
            {% csrf_token %}
            <div class="form-field-group">
                <div class="form-field">
                    <span class="rate-stars"></span>
                </div>
            </div>
            <div class="form-field-group review-textarea-group">
                <div class="form-field">
                    <label for="review">Write a review <span>(optional)</span></label>
                    <textarea class="rate-review" id="review" maxlength="500"></textarea>
                </div>
            </div>
            <span class="error-message"></span>
            <div class="form-actions">
                <button class="btn-primary btn-review-submit" type="submit">Submit</button>
                <div class="loader hidden">
                    <i class="fa fa-refresh fa-3x rotating" aria-hidden="true"></i>
                </div>
            </div>
        </form>
    </div>
{% endblock %}