{% load staticfiles i18n %}
{% load auth_template_tags %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>StrainRx - {% block title %}Strains Web{% endblock title %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <script>
        var STATIC_URL = '{% static '' %}',
                HTTP_USERNAME = '{% http_username %}',
                HTTP_PASSWORD = '{% http_password %}',
                GOOGLE_API_KEY = '{% google_maps_api_key %}';
    </script>

    {% block css %}
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet"
              integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1"
              crossorigin="anonymous">
        <link href="{% static 'css/vendor/jquery-ui.min.css' %}" rel="stylesheet">
        <link href="{% static 'css/vendor/jquery.rateyo.min.css' %}" rel="stylesheet">
        <link href="{% static 'css/pages/base.css' %}" rel="stylesheet">
    {% endblock %}
</head>

<body>
<div class="strains-wrapper">
    <header>
        {% include 'navbar.html' %}
    </header>
    <main class="main-region">
        {% block content %}
            <p>Use this document as a way to quick start any new project.</p>
        {% endblock content %}
    </main>
</div>

{% include 'footer.html' %}

<div id="loading-spinner">
    <i class="fa fa-spinner fa-pulse"></i>
</div>

{% block javascript %}
    <script src="{% static 'js/vendor/jquery.min.js' %}"></script>
    <script src="{% static 'js/vendor/jquery.validate.min.js' %}"></script>
    <script src="{% static 'js/vendor/jquery-ui.min.js' %}"></script>
    <script src="{% static 'js/vendor/jquery.mask.min.js' %}"></script>
    <script src="{% static 'js/vendor/lodash.min.js' %}"></script>
    <script src="{% static 'js/vendor/class.js' %}"></script>
    <script src="{% static 'js/vendor/jquery.rateyo.min.js' %}"></script>
    <script src="{% static 'js/vendor/js.cookie.js' %}"></script>
    <script src="{% static 'js/vendor/jquery.ba-hashchange.min.js' %}"></script>
    <script src="{% static 'js/pages/common.js' %}"></script>
    <script src="{% static 'js/views/base_view.js' %}"></script>
    <script src="{% static 'js/pages/base.js' %}"></script>
    <script src="{% static 'js/common/constants.js' %}"></script>
    <script src="{% static 'js/common/dialog.js' %}"></script>
    <script src="{% static 'js/common/google_locations.js' %}"></script>
    <script src="{% static 'js/common/format.js' %}"></script>
    <script src="{% static 'js/users/user_settings.js' %}"></script>
    <script src="{% static 'js/navbar.js' %}"></script>

    <script src="{% google_maps_api_url %}"></script>

    <script type="text/javascript">
        W.Base.init();
        W.Navbar.init({
            location: {% if request.user.is_authenticated %}
                {{ request.user.get_location_json | safe }} {% else %} null {% endif %},
            authenticated: '{{ request.user.is_authenticated }}' == 'True'
        });
    </script>

    {% if request.user.is_authenticated and request.user.get_location == None %}
        <script src="{% static 'js/views/location_view.js' %}"></script>
        <script src="{% static 'js/pages/location.js' %}"></script>
        <script type="text/javascript">
            W.Location.init({
                authenticated: true,
                userId: '{{ request.user.id }}'
            });
        </script>
    {% endif %}

    {% if not request.user.is_authenticated %}
        <script src="{% static 'js/views/location_view.js' %}"></script>
        <script src="{% static 'js/pages/location.js' %}"></script>
        <script type="text/javascript">
            W.Location.init({
                authenticated: false,
                userId: null
            });
        </script>
    {% endif %}
{% endblock javascript %}

</body>

{% block modal %}{% endblock modal %}

</html>

